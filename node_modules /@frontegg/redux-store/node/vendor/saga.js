"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.loadVendorPublicInfo = loadVendorPublicInfo;
exports.sagas = sagas;
exports.vendorSagasMock = vendorSagasMock;
var _effects = require("redux-saga/effects");
var _restApi = require("@frontegg/rest-api");
var _reducer = require("./reducer");
var _utils = require("../auth/utils");
function* loadVendorPublicInfo() {
  yield (0, _effects.put)(_reducer.actions.setVendorState({
    loading: true
  }));
  try {
    const {
      whiteLabelMode = false
    } = yield _restApi.api.vendor.getVendorPublicInfo();
    yield (0, _effects.put)(_reducer.actions.setVendorState({
      whiteLabelMode,
      loading: false
    }));
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setVendorState({
      loading: false
    }));
    console.error('failed to getVendorPublicInfo - ', e);
  }
}

/*********************************
 *  Preview Sagas
 *********************************/

function* loadVendorPublicInfoMock() {
  try {
    yield (0, _effects.put)(_reducer.actions.setVendorState({
      whiteLabelMode: false
    }));
    yield (0, _utils.delay)();
  } catch (e) {
    console.error('failed to getVendorPublicInfo - ', e);
  }
}
function* vendorSagasMock() {
  yield (0, _effects.takeEvery)(_reducer.actions.loadVendorPublicInfo, loadVendorPublicInfoMock);
}
function* sagas() {
  yield (0, _effects.takeEvery)(_reducer.actions.loadVendorPublicInfo, loadVendorPublicInfo);
}