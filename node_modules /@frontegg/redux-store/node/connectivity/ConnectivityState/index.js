"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.connectivityReducers = exports.connectivityActions = void 0;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _toolkit = require("@reduxjs/toolkit");
var _constants = require("../../constants");
const initialState = {
  isLoading: false,
  isSaving: false,
  list: [],
  processIds: [],
  slackChannels: {
    isLoading: false
  }
};
const reducers = {
  initData: () => (0, _extends2.default)({}, initialState),
  // Deprecated: use initData instead;
  // cleanData: () => ({ ...initialState }),
  setConnectivityState: (state, {
    payload
  }) => (0, _extends2.default)({}, state, payload),
  cleanWebhookTestData: state => (0, _extends2.default)({}, state, {
    testResult: undefined
  }),
  cleanWebhookLogsData: state => (0, _extends2.default)({}, state, {
    webhookLogs: undefined
  }),
  cleanWebhookTestMessage: state => {
    var _state$testResult;
    return (0, _extends2.default)({}, state, {
      testResult: {
        status: (_state$testResult = state.testResult) == null ? void 0 : _state$testResult.status,
        message: undefined
      }
    });
  },
  cleanError: state => (0, _extends2.default)({}, state, {
    error: undefined
  }),
  cleanSlackData: state => (0, _extends2.default)({}, state, {
    slackChannels: {
      isLoading: false
    }
  }),
  postWebhookRetryAction: {
    prepare: logId => ({
      payload: logId
    }),
    reducer: (state, {
      payload
    }) => (0, _extends2.default)({}, state, {
      retryResult: (0, _extends2.default)({}, state.retryResult, {
        [payload]: {
          isProcess: true,
          success: false
        }
      })
    })
  },
  postWebhookRetryResult: {
    prepare: payload => ({
      payload
    }),
    reducer: (state, {
      payload
    }) => (0, _extends2.default)({}, state, {
      retryResult: (0, _extends2.default)({}, state.retryResult, payload)
    })
  }
};
exports.connectivityReducers = reducers;
const actions = {
  loadSlackActions: (0, _toolkit.createAction)(`${_constants.connectivityStoreName}/loadSlackActions`),
  loadDataAction: (0, _toolkit.createAction)(`${_constants.connectivityStoreName}/loadDataAction`, payload => ({
    payload
  })),
  postDataAction: (0, _toolkit.createAction)(`${_constants.connectivityStoreName}/postDataAction`, payload => ({
    payload
  })),
  postCodeAction: (0, _toolkit.createAction)(`${_constants.connectivityStoreName}/postCodeAction`, payload => ({
    payload
  })),
  loadScope: (0, _toolkit.createAction)(`${_constants.connectivityStoreName}/loadScope`),
  deleteWebhookConfigAction: (0, _toolkit.createAction)(`${_constants.connectivityStoreName}/deleteWebhookConfigAction`, payload => ({
    payload
  })),
  postWebhookTestAction: (0, _toolkit.createAction)(`${_constants.connectivityStoreName}/postWebhookTestAction`, payload => ({
    payload
  })),
  loadWebhookLogsAction: (0, _toolkit.createAction)(`${_constants.connectivityStoreName}/loadWebhookLogsAction`, (id, offset = 0, limit = 10) => ({
    payload: {
      id,
      offset,
      limit
    }
  }))
};

/**
 *  To be used for actions types after dispatch, and should contains
 *  the reducers and actions as standalone function
 */
exports.connectivityActions = actions;