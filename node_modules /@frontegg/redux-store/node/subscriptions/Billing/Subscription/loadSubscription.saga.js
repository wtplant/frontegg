"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.loadSubscription = loadSubscription;
var _effects = require("redux-saga/effects");
var _index = require("./index");
var _restApi = require("@frontegg/rest-api");
// Separated folder due to circular dependency

// eslint-disable-next-line @typescript-eslint/no-explicit-any
function* loadSubscription() {
  yield (0, _effects.put)(_index.subscriptionActions.setLoading(true));
  try {
    const [subscription] = yield (0, _effects.call)(_restApi.api.subscriptions.getManagedSubscriptions);
    yield (0, _effects.put)(_index.subscriptionActions.setState({
      subscription,
      fetching: false,
      loading: false,
      error: null
    }));
  } catch (e) {
    yield (0, _effects.put)(_index.subscriptionActions.setError(e));
  }
}