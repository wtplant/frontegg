"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.auditsMetadataSagas = auditsMetadataSagas;
exports.auditsMetadataSagasMock = auditsMetadataSagasMock;
var _effects = require("redux-saga/effects");
var _restApi = require("@frontegg/rest-api");
var _reducer = require("../reducer");
var _dummy = require("../dummy");
function* loadAuditsMetadata() {
  yield (0, _effects.put)(_reducer.actions.setAuditsMetadataState({
    loading: true,
    error: null
  }));
  try {
    const {
      properties
    } = yield (0, _effects.call)(_restApi.api.metadata.getAuditsMetadata);
    yield (0, _effects.put)(_reducer.actions.setAuditsMetadataState({
      columns: properties,
      loading: false
    }));
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setAuditsMetadataState({
      error: e,
      loading: false
    }));
  }
}
function* auditsMetadataSagas() {
  yield (0, _effects.takeEvery)(_reducer.actions.loadAuditsMetadata, loadAuditsMetadata);
}

/*********************************
 *  Preview Sagas
 *********************************/

function* loadAuditsMetadataMock() {
  yield (0, _effects.put)(_reducer.actions.setAuditsMetadataState({
    loading: true,
    error: null
  }));
  try {
    const {
      properties
    } = _dummy.auditLogsMetadataDemo;
    yield (0, _effects.put)(_reducer.actions.setAuditsMetadataState({
      columns: properties,
      loading: false
    }));
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setAuditsMetadataState({
      error: e,
      loading: false
    }));
  }
}
function* auditsMetadataSagasMock() {
  yield (0, _effects.takeEvery)(_reducer.actions.loadAuditsMetadata, loadAuditsMetadataMock);
}