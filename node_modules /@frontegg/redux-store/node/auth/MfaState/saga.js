"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.mfaSagas = mfaSagas;
exports.mfaSagasMock = mfaSagasMock;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _objectWithoutPropertiesLoose2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose"));
var _effects = require("redux-saga/effects");
var _restApi = require("@frontegg/rest-api");
var _reducer = require("../reducer");
var _interfaces = require("./interfaces");
var _utils = require("../utils");
var _dummy = require("../dummy");
var _utils2 = require("../../utils");
var _saga = require("../LoginState/saga.utils");
const _excluded = ["callback"],
  _excluded2 = ["callback"],
  _excluded3 = ["user"],
  _excluded4 = ["callback"],
  _excluded5 = ["deviceId", "callback"],
  _excluded6 = ["deviceId", "callback"],
  _excluded7 = ["callback"],
  _excluded8 = ["deviceId"],
  _excluded9 = ["deviceId"],
  _excluded10 = ["callback"],
  _excluded11 = ["deviceId"],
  _excluded12 = ["callback"];
function* getMfaStateAfterEnroll(res) {
  const {
    step
  } = yield (0, _effects.select)(state => state.auth.mfaState);
  const mfaState = {
    step: res.recoveryCode ? _interfaces.MFAStep.recoveryCode : step,
    loading: false,
    saving: false,
    error: undefined,
    recoveryCode: res == null ? void 0 : res.recoveryCode
  };
  return mfaState;
}
function* enrollMfa() {
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    const {
      qrCode
    } = yield (0, _effects.call)(_restApi.api.auth.enrollMfa);
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: undefined,
      qrCode
    }));
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
  }
}
function* verifyMfa(_ref) {
  let {
      payload: {
        callback
      }
    } = _ref,
    payload = (0, _objectWithoutPropertiesLoose2.default)(_ref.payload, _excluded);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    const user = yield (0, _effects.select)(state => state.auth.user);
    const data = yield (0, _effects.call)(_restApi.api.auth.verifyMfa, payload);
    const mfaDevices = yield (0, _effects.call)(_restApi.api.auth.getMFADevices);
    const mfaState = yield getMfaStateAfterEnroll(data);
    yield (0, _effects.put)(_reducer.actions.setMfaState((0, _extends2.default)({}, mfaState, {
      mfaDevices
    })));
    yield (0, _effects.put)(_reducer.actions.setUser((0, _extends2.default)({}, user, {
      mfaEnrolled: true
    })));
    callback == null ? void 0 : callback(mfaState.recoveryCode);
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    callback == null ? void 0 : callback(null, e);
  }
}
function* verifyMfaAfterForce(_ref2) {
  let {
      payload: {
        callback
      }
    } = _ref2,
    payload = (0, _objectWithoutPropertiesLoose2.default)(_ref2.payload, _excluded2);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    loading: true
  }));
  try {
    const _yield$call = yield (0, _effects.call)(_restApi.api.auth.loginWithMfaV2, payload),
      {
        user
      } = _yield$call,
      rest = (0, _objectWithoutPropertiesLoose2.default)(_yield$call, _excluded3);
    const mfaState = {
      step: _interfaces.MFAStep.recoveryCode,
      loading: false,
      saving: false,
      error: undefined
    };
    if (user != null && user.recoveryCode) {
      mfaState.recoveryCode = user.recoveryCode;
    }
    yield (0, _effects.put)(_reducer.actions.setMfaState(mfaState));
    yield (0, _saga.afterAuthenticationStateUpdate)((0, _extends2.default)({
      user
    }, rest));
    callback == null ? void 0 : callback(mfaState.recoveryCode);
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      loading: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    callback == null ? void 0 : callback(null, e);
  }
}
function* disableMfa({
  payload
}) {
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    var _payload$callback;
    yield (0, _effects.call)(_restApi.api.auth.disableMfa, payload);
    const mfaDevices = yield (0, _effects.call)(_restApi.api.auth.getMFADevices);
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: undefined,
      mfaDevices
    }));
    (_payload$callback = payload.callback) == null ? void 0 : _payload$callback.call(payload, true);
  } catch (e) {
    var _payload$callback2;
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    (_payload$callback2 = payload.callback) == null ? void 0 : _payload$callback2.call(payload, false, e);
  }
}
function* preEnrollMfaWebAuthn({
  payload
}) {
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    var _data$options$exclude, _payload$callback3;
    const data = yield (0, _effects.call)(_restApi.api.auth.preEnrollMFAWebAuthn);
    const options = (0, _extends2.default)({}, data.options, {
      challenge: (0, _utils.base64urlDecode)(data.options.challenge),
      user: (0, _extends2.default)({}, data.options.user, {
        id: (0, _utils.base64urlDecode)(data.options.user.id)
      }),
      excludeCredentials: (_data$options$exclude = data.options.excludeCredentials) == null ? void 0 : _data$options$exclude.map(credentials => (0, _extends2.default)({}, credentials, {
        id: (0, _utils.base64urlDecode)(credentials.id)
      }))
    });
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false
    }));
    (_payload$callback3 = payload.callback) == null ? void 0 : _payload$callback3.call(payload, {
      options,
      webauthnToken: data.webauthnToken
    });
  } catch (e) {
    var _payload$callback4;
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    (_payload$callback4 = payload.callback) == null ? void 0 : _payload$callback4.call(payload, null, e);
  }
}
function* enrollMfaWebAuthn(_ref3) {
  let {
      payload: {
        callback
      }
    } = _ref3,
    payload = (0, _objectWithoutPropertiesLoose2.default)(_ref3.payload, _excluded4);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    const publicKey = (0, _utils.publicKeyCredentialToJSON)(payload.publicKey);
    const data = yield (0, _effects.call)(_restApi.api.auth.enrollMFAWebAuthn, (0, _extends2.default)({}, payload, {
      options: publicKey
    }));
    const mfaDevices = yield (0, _effects.call)(_restApi.api.auth.getMFADevices);
    const mfaState = yield getMfaStateAfterEnroll(data);
    yield (0, _effects.put)(_reducer.actions.setMfaState((0, _extends2.default)({}, mfaState, {
      mfaDevices
    })));
    callback == null ? void 0 : callback(mfaState.recoveryCode);
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    callback == null ? void 0 : callback(null, e);
  }
}
function* preDisableMfaWebAuthn(_ref4) {
  let {
      payload: {
        deviceId,
        callback
      }
    } = _ref4,
    payload = (0, _objectWithoutPropertiesLoose2.default)(_ref4.payload, _excluded5);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    var _data$options$allowCr;
    const data = yield (0, _effects.call)(_restApi.api.auth.preDisableMFAWebAuthn, deviceId);
    const options = (0, _extends2.default)({}, data.options, {
      challenge: (0, _utils.base64urlDecode)(data.options.challenge),
      allowCredentials: (_data$options$allowCr = data.options.allowCredentials) == null ? void 0 : _data$options$allowCr.map(credentials => (0, _extends2.default)({}, credentials, {
        id: (0, _utils.base64urlDecode)(credentials.id)
      }))
    });
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false
    }));
    callback == null ? void 0 : callback({
      options,
      webauthnToken: data.webauthnToken
    });
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    callback == null ? void 0 : callback(null, e);
  }
}
function* disableMfaWebAuthn(_ref5) {
  let {
      payload: {
        deviceId,
        callback
      }
    } = _ref5,
    payload = (0, _objectWithoutPropertiesLoose2.default)(_ref5.payload, _excluded6);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    const publicKey = (0, _utils.publicKeyCredentialToJSON)(payload.publicKey);
    yield (0, _effects.call)(_restApi.api.auth.disableMFAWebAuthn, deviceId, (0, _extends2.default)({}, payload, {
      options: publicKey
    }));
    const mfaDevices = yield (0, _effects.call)(_restApi.api.auth.getMFADevices);
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: undefined,
      mfaDevices
    }));
    callback == null ? void 0 : callback(true);
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    callback == null ? void 0 : callback(false, e);
  }
}
function* preEnrollMfaSms({
  payload
}) {
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    var _payload$callback5;
    const res = yield (0, _effects.call)(_restApi.api.auth.preEnrollMFASMS, payload);
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: undefined,
      otcToken: res.otcToken,
      phoneNumber: res.phoneNumber
    }));
    (_payload$callback5 = payload.callback) == null ? void 0 : _payload$callback5.call(payload, true);
  } catch (e) {
    var _payload$callback6;
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    (_payload$callback6 = payload.callback) == null ? void 0 : _payload$callback6.call(payload, false, e);
  }
}
function* enrollMfaSms(_ref6) {
  let {
      payload: {
        callback
      }
    } = _ref6,
    payload = (0, _objectWithoutPropertiesLoose2.default)(_ref6.payload, _excluded7);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    const data = yield (0, _effects.call)(_restApi.api.auth.enrollMFASMS, payload);
    const mfaDevices = yield (0, _effects.call)(_restApi.api.auth.getMFADevices);
    const mfaState = yield getMfaStateAfterEnroll(data);
    yield (0, _effects.put)(_reducer.actions.setMfaState((0, _extends2.default)({}, mfaState, {
      mfaDevices
    })));
    callback == null ? void 0 : callback(mfaState.recoveryCode);
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    callback == null ? void 0 : callback(null, e);
  }
}
function* preDisableMfaSms(_ref7) {
  let {
      payload: {
        deviceId
      }
    } = _ref7,
    payload = (0, _objectWithoutPropertiesLoose2.default)(_ref7.payload, _excluded8);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    var _payload$callback7;
    const res = yield (0, _effects.call)(_restApi.api.auth.preDisableMFASMS, deviceId);
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: undefined,
      otcToken: res.otcToken,
      phoneNumber: res.phoneNumber
    }));
    (_payload$callback7 = payload.callback) == null ? void 0 : _payload$callback7.call(payload, true);
  } catch (e) {
    var _payload$callback8;
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    (_payload$callback8 = payload.callback) == null ? void 0 : _payload$callback8.call(payload, false, e);
  }
}
function* disableMfaSms(_ref8) {
  let {
      payload: {
        deviceId
      }
    } = _ref8,
    payload = (0, _objectWithoutPropertiesLoose2.default)(_ref8.payload, _excluded9);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    var _payload$callback9;
    yield (0, _effects.call)(_restApi.api.auth.disableMFASMS, deviceId, payload);
    const mfaDevices = yield (0, _effects.call)(_restApi.api.auth.getMFADevices);
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: undefined,
      mfaDevices
    }));
    (_payload$callback9 = payload.callback) == null ? void 0 : _payload$callback9.call(payload, true);
  } catch (e) {
    var _payload$callback10;
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    (_payload$callback10 = payload.callback) == null ? void 0 : _payload$callback10.call(payload, false, e);
  }
}
function* getMFADevices() {
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    loading: true
  }));
  try {
    const user = yield (0, _effects.select)(state => state.auth.user);
    const mfaDevices = yield (0, _effects.call)(_restApi.api.auth.getMFADevices);
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      loading: false,
      error: undefined,
      mfaDevices
    }));
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      loading: false,
      error: (0, _utils2.errorHandler)(e)
    }));
  }
}
function* getMFAStrategies() {
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    loading: true
  }));
  try {
    const res = yield (0, _effects.call)(_restApi.api.auth.getMFAStrategiesConfig);
    const mfaStrategies = res.strategies.filter(({
      isActive
    }) => isActive).map(({
      strategy
    }) => strategy);
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      loading: false,
      error: undefined,
      mfaStrategies
    }));
  } catch (e) {
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      loading: false,
      error: (0, _utils2.errorHandler)(e)
    }));
  }
}
function* mfaSagas() {
  yield (0, _effects.takeEvery)(_reducer.actions.enrollMfa, enrollMfa);
  yield (0, _effects.takeEvery)(_reducer.actions.getMFADevices, getMFADevices);
  yield (0, _effects.takeEvery)(_reducer.actions.getMFAStrategies, getMFAStrategies);
  yield (0, _effects.takeEvery)(_reducer.actions.verifyMfa, verifyMfa);
  yield (0, _effects.takeEvery)(_reducer.actions.disableMfa, disableMfa);
  yield (0, _effects.takeEvery)(_reducer.actions.verifyMfaAfterForce, verifyMfaAfterForce);
  yield (0, _effects.takeEvery)(_reducer.actions.preDisableMfaSms, preDisableMfaSms);
  yield (0, _effects.takeEvery)(_reducer.actions.disableMfaSms, disableMfaSms);
  yield (0, _effects.takeEvery)(_reducer.actions.preEnrollMfaSms, preEnrollMfaSms);
  yield (0, _effects.takeEvery)(_reducer.actions.enrollMfaSms, enrollMfaSms);
  yield (0, _effects.takeEvery)(_reducer.actions.preEnrollMfaWebAuthn, preEnrollMfaWebAuthn);
  yield (0, _effects.takeEvery)(_reducer.actions.enrollMfaWebAuthn, enrollMfaWebAuthn);
  yield (0, _effects.takeEvery)(_reducer.actions.preDisableMfaWebAuthn, preDisableMfaWebAuthn);
  yield (0, _effects.takeEvery)(_reducer.actions.disableMfaWebAuthn, disableMfaWebAuthn);
}

/*********************************
 *  Preview Sagas
 *********************************/

function* enrollMfaMock() {
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  const qrCode = 'test';
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: false,
    error: undefined,
    qrCode
  }));
}
function* verifyMfaMock({
  payload: {
    callback
  }
}) {
  const {
    mfaDevices = {
      webauthn: [],
      phones: [],
      authenticators: [],
      emails: []
    }
  } = yield (0, _effects.select)(state => state.auth.mfaState);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  yield (0, _utils.delay)();
  const data = {
    token: 'token',
    recoveryCode: 'recoveryCode'
  };
  const mfaState = {
    step: _interfaces.MFAStep.recoveryCode,
    loading: false,
    error: undefined,
    saving: false,
    mfaDevices: (0, _extends2.default)({}, mfaDevices, {
      authenticators: [{
        id: 'authenticator-id'
      }]
    })
  };
  if (data != null && data.recoveryCode) {
    mfaState.recoveryCode = data.recoveryCode;
  }
  yield (0, _effects.put)(_reducer.actions.setMfaState(mfaState));
  yield (0, _effects.put)(_reducer.actions.setUser((0, _extends2.default)({}, _dummy.userDemo, {
    mfaEnrolled: true
  })));
  callback == null ? void 0 : callback(mfaState.recoveryCode);
}
function* verifyMfaAfterForceMock(_ref9) {
  let {
      payload: {
        callback
      }
    } = _ref9,
    payload = (0, _objectWithoutPropertiesLoose2.default)(_ref9.payload, _excluded10);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    loading: true
  }));
  yield (0, _utils.delay)();
  const data = (0, _extends2.default)({}, payload, {
    recoveryCode: 'recoveryCode'
  });
  const mfaState = {
    step: _interfaces.MFAStep.recoveryCode,
    loading: false,
    error: undefined,
    saving: false
  };
  if (data != null && data.recoveryCode) {
    mfaState.recoveryCode = data.recoveryCode;
  }
  yield (0, _effects.put)(_reducer.actions.setMfaState(mfaState));
  yield (0, _utils.delay)();
  yield (0, _effects.put)(_reducer.actions.setUser((0, _extends2.default)({}, _dummy.userDemo, {
    mfaEnrolled: true
  })));
  callback == null ? void 0 : callback(mfaState.recoveryCode);
}
function* disableMfaMock({
  payload
}) {
  var _payload$callback11;
  const {
    mfaDevices = {
      webauthn: [],
      phones: [],
      authenticators: [],
      emails: []
    }
  } = yield (0, _effects.select)(state => state.auth.mfaState);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  yield (0, _utils.delay)();
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: false,
    error: undefined,
    mfaDevices: (0, _extends2.default)({}, mfaDevices, {
      authenticators: []
    })
  }));
  yield (0, _effects.put)(_reducer.actions.setUser((0, _extends2.default)({}, _dummy.userDemo)));
  (_payload$callback11 = payload.callback) == null ? void 0 : _payload$callback11.call(payload, true);
}
function* preDisableMfaSmsMock(_ref10) {
  let {} = _ref10,
    payload = (0, _objectWithoutPropertiesLoose2.default)(_ref10.payload, _excluded11);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  try {
    var _payload$callback12;
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: undefined,
      otcToken: 'otc-token',
      phoneNumber: '+972504589346'
    }));
    (_payload$callback12 = payload.callback) == null ? void 0 : _payload$callback12.call(payload, true);
  } catch (e) {
    var _payload$callback13;
    yield (0, _effects.put)(_reducer.actions.setMfaState({
      saving: false,
      error: (0, _utils2.errorHandler)(e)
    }));
    (_payload$callback13 = payload.callback) == null ? void 0 : _payload$callback13.call(payload, false, e);
  }
}
function* disableMfaSmsMock({
  payload
}) {
  var _payload$callback14;
  const {
    mfaDevices = {
      webauthn: [],
      phones: [],
      authenticators: [],
      emails: []
    }
  } = yield (0, _effects.select)(state => state.auth.mfaState);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  yield (0, _utils.delay)();
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    loading: false,
    error: undefined,
    mfaDevices: (0, _extends2.default)({}, mfaDevices, {
      phones: []
    })
  }));
  yield (0, _effects.put)(_reducer.actions.setUser((0, _extends2.default)({}, _dummy.userDemo)));
  (_payload$callback14 = payload.callback) == null ? void 0 : _payload$callback14.call(payload, true);
}
function* preEnrollMfaSmsMock({
  payload
}) {
  var _payload$callback15;
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  yield (0, _utils.delay)();
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: false,
    error: undefined,
    otcToken: 'otc-token',
    phoneNumber: '+972504589346'
  }));
  (_payload$callback15 = payload.callback) == null ? void 0 : _payload$callback15.call(payload, true);
}
function* enrollMfaSmsMock(_ref11) {
  let {
      payload: {
        callback
      }
    } = _ref11,
    payload = (0, _objectWithoutPropertiesLoose2.default)(_ref11.payload, _excluded12);
  const {
    mfaDevices = {
      webauthn: [],
      phones: [],
      authenticators: [],
      emails: []
    }
  } = yield (0, _effects.select)(state => state.auth.mfaState);
  yield (0, _effects.put)(_reducer.actions.setMfaState({
    saving: true
  }));
  yield (0, _utils.delay)();
  const data = {
    token: 'token',
    recoveryCode: 'recoveryCode'
  };
  const mfaState = {
    step: _interfaces.MFAStep.recoveryCode,
    loading: false,
    error: undefined,
    saving: false,
    mfaDevices: (0, _extends2.default)({}, mfaDevices, {
      phones: [{
        id: 'phone-id',
        phoneNumber: '+972504589346'
      }]
    })
  };
  if (data != null && data.recoveryCode) {
    mfaState.recoveryCode = data.recoveryCode;
  }
  yield (0, _effects.put)(_reducer.actions.setMfaState(mfaState));
  yield (0, _effects.put)(_reducer.actions.setUser((0, _extends2.default)({}, _dummy.userDemo, {
    mfaEnrolled: true
  })));
  callback == null ? void 0 : callback(mfaState.recoveryCode);
}
function* mfaSagasMock() {
  yield (0, _effects.takeEvery)(_reducer.actions.enrollMfa, enrollMfaMock);
  yield (0, _effects.takeEvery)(_reducer.actions.verifyMfa, verifyMfaMock);
  yield (0, _effects.takeEvery)(_reducer.actions.disableMfa, disableMfaMock);
  yield (0, _effects.takeEvery)(_reducer.actions.verifyMfaAfterForce, verifyMfaAfterForceMock);
  yield (0, _effects.takeEvery)(_reducer.actions.preDisableMfaSms, preDisableMfaSmsMock);
  yield (0, _effects.takeEvery)(_reducer.actions.disableMfaSms, disableMfaSmsMock);
  yield (0, _effects.takeEvery)(_reducer.actions.preEnrollMfaSms, preEnrollMfaSmsMock);
  yield (0, _effects.takeEvery)(_reducer.actions.enrollMfaSms, enrollMfaSmsMock);
}